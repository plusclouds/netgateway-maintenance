---
- name: Deploy Netgateway Server
  hosts: localhost
  become: false
  gather_facts: false
  roles: 
    -  role: plusclouds.netgateway.configs.get
    -  role: plusclouds.netgateway.deploy
    -  role: plusclouds.netgateway.set
    -  role: plusclouds.environment.information
  vars:
    - wan: ""
    - network: ""
    - datacenter_node: ""
    - netgateway: ""

- name: Install netgateway services to server
  hosts: netgateway
  become: false
  gather_facts: true
  roles:
   -  role: plusclouds.environment.information
   -  role: plusclouds.netgateway.set.ipaddr
   -  role: plusclouds.random.password.change
   -  role: plusclouds.vm.set.password
#   -  role: plusclouds.netgateway.proxy.setup
#   -  role: plusclouds.netgateway.iptables.setup
#   -  role: plusclouds.netgateway.dhcp.setup
#   -  role: plusclouds.netgateway.dhcp.add.subnet
  environment:
    ANSIBLE_HOST_KEY_CHECKING: false
