---
- name: Discover Netgateway Server
  hosts: localhost
  become: false
  gather_facts: false
  roles:
    -  role: plusclouds.netgateway.configs.get
    -  role: plusclouds.environment.information
  vars:
    - netgateway: ""
    - leo_url: http://10.100.0.114

- name: Add NAT Rule
  hosts: netgateway
  become: false
  gather_facts: true
  roles:
    -  role: plusclouds.environment.information
    -  role: plusclouds.netgateway.configs.get
    -  role: plusclouds.netgateway.iptables.add.rule
  vars:
    - interface: eth0
    - source_port: 23
    - destination_ip: 10.128.187.109
    - destination_port: 22
    - leo_url: http://10.100.0.114
  environment:
    ANSIBLE_HOST_KEY_CHECKING: false
